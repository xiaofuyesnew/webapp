"use strict";$(function(){var e={el:$("#app"),setScreen:function(){e.el.css({height:window.innerHeight-20+"px"})}};e.setScreen();var t=echarts.init(document.getElementById("projectStatus")),a=function(e){e||(e="projectTypeText=&projectChildTypeText="),$.ajax({url:"http://test.360guanggu.com/yuanan_fupin/api.php/Changepoor/project",type:"post",data:e,success:function(e){for(var a=[],r={},n=0;n<JSON.parse(e).data.length;n++)r.name=JSON.parse(e).data[n].text,r.value=+JSON.parse(e).data[n].total,a.push(r),r={};t.setOption({series:[{type:"pie",radius:"35%",center:["50%","50%"],data:a,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{normal:{formatter:"{b} {c} {d}%"}}}]})}})},r=echarts.init(document.getElementById("dyprojectnum")),n=function(e){e||(e="projectTypeText=&projectChildTypeText=&town=&country="),$.ajax({url:"http://test.360guanggu.com/yuanan_fupin/api.php/Changepoor/differentyear",type:"post",data:e,success:function(e){for(var t=[],a=[],n=0;n<JSON.parse(e).data.length;n++)t[n]=JSON.parse(e).data[n].year,a[n]=JSON.parse(e).data[n].total;r.setOption({grid:{left:"left",containLabel:!0},xAxis:{name:"项目数",nameRotate:90,type:"value",boundaryGap:[0,.01],position:"top"},yAxis:{name:"年份",nameLocation:"start",type:"category",axisTick:{interval:0},axisLabel:{interval:0},data:t},series:[{name:"项目数",type:"bar",data:a}]})}})},o=echarts.init(document.getElementById("sydproject")),p=function(e){e||(e="projectTypeText=&year=2017&town=&country="),$.ajax({url:"http://test.360guanggu.com/yuanan_fupin/api.php/Changepoor/differentproject",type:"post",data:e,success:function(e){for(var t=[],a=[],r=0;r<JSON.parse(e).data.length;r++)t[r]=JSON.parse(e).data[r].text,a[r]=JSON.parse(e).data[r].total;o.setOption({grid:{left:"left",containLabel:!0},xAxis:{name:"项目数",nameRotate:90,type:"value",boundaryGap:[0,.01],position:"top"},yAxis:{name:"项目类型",nameLocation:"start",type:"category",axisTick:{interval:0},axisLabel:{interval:0},data:t},series:[{name:"项目数",type:"bar",data:a}]})}})},l=echarts.init(document.getElementById("sydprojectb")),i=function(e){e||(e="projectTypeText=&year=2017&town=&country="),$.ajax({url:"http://test.360guanggu.com/yuanan_fupin/api.php/Changepoor/souyi",type:"post",data:e,success:function(e){for(var t=[],a=[],r=[],n=0;n<JSON.parse(e).data.length;n++)t[n]=JSON.parse(e).data[n].text,a[n]=JSON.parse(e).data[n].total,r[n]=JSON.parse(e).data[n].total;l.setOption({legend:{data:["受益人数","脱贫人数"]},grid:{left:"left",containLabel:!0},xAxis:{name:"人数",nameRotate:90,type:"value",boundaryGap:[0,.01],position:"top"},yAxis:{name:"项目类型",nameLocation:"start",type:"category",axisTick:{interval:0},axisLabel:{interval:0},data:t},series:[{name:"受益人数",type:"bar",data:a},{name:"脱贫人数",type:"bar",data:r}]})}})};a(),n(),p(),i(),$.ajax({url:"http://test.360guanggu.com/yuanan_fupin/api.php/Changepoor/search",type:"get",success:function(e){for(var t=[{data:[{id:"0",value:"不限"}]}],r=["不限"],o={},l={},s=0;s<JSON.parse(e).data.length;s++){if(o.id=JSON.parse(e).data[s].id,o.value=JSON.parse(e).data[s].text,r.push(JSON.parse(e).data[s].text),JSON.parse(e).data[s].data.length){o.childs=[{id:"0",value:"不限"}];for(var c=0;c<JSON.parse(e).data[s].data.length;c++)l.id=JSON.parse(e).data[s].data[c].id,l.value=JSON.parse(e).data[s].data[c].text,o.childs.push(l),l={}}t[0].data.push(o),o={}}new MobileSelect({trigger:"#project",title:"选择项目",wheels:t,callback:function(e,t){var r="";switch(t.length){case 1:r="不限"===t[0].value?"projectTypeText=&projectChildTypeText=":"projectTypeText="+t[0].value+"&projectChildTypeText=";break;case 2:r="不限"===t[1].value?"projectTypeText="+t[0].value+"&projectChildTypeText=":"projectTypeText="+t[0].value+"&projectChildTypeText="+t[1].value}a(r)}}),new MobileSelect({trigger:"#projectTwo",title:"选择项目",wheels:t,callback:function(e,t){var a="",r="",o=JSON.parse($("#zhen").attr("data-self"));$("#projectTwo").attr("data-self",JSON.stringify(t)),a=1===o.length?"town=&country=":"0"===o[1].id?"town="+o[0].value+"&country=":"town="+o[0].value+"&country="+o[1].value,r=1===t.length?"0"===t[0].id?"projectTypeText=&projectChildTypeText=":"projectTypeText="+t[0].value+"&projectChildTypeText=":"0"===t[1].id?"projectTypeText="+t[0].value+"&projectChildTypeText=":"projectTypeText="+t[0].value+"&projectChildTypeText="+t[1].value,n(r+"&"+a)}}),new MobileSelect({trigger:"#projectThree",title:"选择项目",wheels:[{data:r}],callback:function(e,t){var a="",r="",n=JSON.parse($("#year").attr("data-self"))[0],o=JSON.parse($("#zhenTwo").attr("data-self"));$("#projectThree").attr("data-self",JSON.stringify(t)),a=1===o.length?"town=&country=":"0"===o[1].id?"town="+o[0].value+"&country=":"town="+o[0].value+"&country="+o[1].value,r="不限"===t[0]?"projectTypeText=":"projectTypeText="+t[0],p(r+"&year="+n+"&"+a)}}),new MobileSelect({trigger:"#projectFour",title:"选择项目",wheels:[{data:r}],callback:function(e,t){var a="",r="",n=JSON.parse($("#yearTwo").attr("data-self"))[0],o=JSON.parse($("#zhenThree").attr("data-self"));$("#projectFour").attr("data-self",JSON.stringify(t)),a=1===o.length?"town=&country=":"0"===o[1].id?"town="+o[0].value+"&country=":"town="+o[0].value+"&country="+o[1].value,r="不限"===t[0]?"projectTypeText=":"projectTypeText="+t[0],i(r+"&year="+n+"&"+a)}})}}),$.ajax({url:"http://test.360guanggu.com/yuanan_fupin/api.php/Changepoor/searchtown",type:"get",success:function(e){for(var t=[{data:[{id:"0",value:"不限"}]}],a={},r={},o=0;o<JSON.parse(e).data.length;o++){if(a.id=JSON.parse(e).data[o].id,a.value=JSON.parse(e).data[o].text,JSON.parse(e).data[o].data.length){a.childs=[{id:"0",value:"不限"}];for(var l=0;l<JSON.parse(e).data[o].data.length;l++)r.id=JSON.parse(e).data[o].data[l].id,r.value=JSON.parse(e).data[o].data[l].text,a.childs.push(r),r={}}t[0].data.push(a),a={}}new MobileSelect({trigger:"#zhen",title:"选择镇",wheels:t,callback:function(e,t){var a="",r="",o=JSON.parse($("#projectTwo").attr("data-self"));$("#zhen").attr("data-self",JSON.stringify(t)),r=1===o.length?"0"===o[0].id?"projectTypeText=&projectChildTypeText=":"projectTypeText="+o[0].value+"&projectChildTypeText=":"0"===o[1].id?"town="+o[0].value+"&country=":"town="+o[0].value+"&country="+o[1].value,a=1===t.length?"town=&country=":"0"===t[1].id?"town="+t[0].value+"&country=":"town="+t[0].value+"&country="+t[1].value,n(r+"&"+a)}}),new MobileSelect({trigger:"#zhenTwo",title:"选择镇",wheels:t,callback:function(e,t){var a="",r="",n=JSON.parse($("#year").attr("data-self"))[0],o=JSON.parse($("#projectThree").attr("data-self"));$("#zhenTwo").attr("data-self",JSON.stringify(t)),r="不限"===o[0]?"projectTypeText=":"projectTypeText="+o[0],a=1===t.length?"town=&country=":"0"===t[1].id?"town="+t[0].value+"&country=":"town="+t[0].value+"&country="+t[1].value,p(r+"&year="+n+"&"+a)}}),new MobileSelect({trigger:"#zhenThree",title:"选择镇",wheels:t,callback:function(e,t){var a="",r="",n=JSON.parse($("#yearTwo").attr("data-self"))[0],o=JSON.parse($("#projectFour").attr("data-self"));$("#zhenThree").attr("data-self",JSON.stringify(t)),r="不限"===o[0]?"projectTypeText=":"projectTypeText="+o[0],a=1===t.length?"town=&country=":"0"===t[1].id?"town="+t[0].value+"&country=":"town="+t[0].value+"&country="+t[1].value,p(r+"&year="+n+"&"+a)}})}}),$.ajax({url:"http://test.360guanggu.com/yuanan_fupin/api.php/Changepoor/year",type:"get",success:function(e){for(var t=[],a=0;a<JSON.parse(e).data.length;a++)t[a]=JSON.parse(e).data[a].filingyear;new MobileSelect({trigger:"#year",title:"选择年份",wheels:[{data:t}],callback:function(e,t){var a="",r="",n=JSON.parse($("#zhenTwo").attr("data-self")),o=JSON.parse($("#projectThree").attr("data-self"));$("#year").attr("data-self",JSON.stringify(t)),r=1===n.length?"town=&country=":"0"===n[1].id?"town="+n[0].value+"&country=":"town="+n[0].value+"&country="+n[1].value,a=("不限"===o[0]?"projectTypeText=":"projectTypeText="+o[0])+"&year="+t[0]+"&"+r,p(a)}}),new MobileSelect({trigger:"#yearTwo",title:"选择年份",wheels:[{data:t}],callback:function(e,t){var a="",r="",n=JSON.parse($("#zhenThree").attr("data-self")),o=JSON.parse($("#projectFour").attr("data-self"));$("#yearTwo").attr("data-self",JSON.stringify(t)),r=1===n.length?"town=&country=":"0"===n[1].id?"town="+n[0].value+"&country=":"town="+n[0].value+"&country="+n[1].value,a=("不限"===o[0]?"projectTypeText=":"projectTypeText="+o[0])+"&year="+t[0]+"&"+r,i(a)}})}}),$(".subnav .unit").click(function(){$(".subnav .unit").removeClass("blue"),$(".subnav .unit .bar").addClass("hide"),$(this).addClass("blue"),$(this).children(".bar").removeClass("hide"),"1"===$(this).attr("data-nav")?($(".m-main").children().addClass("hide"),$($(".m-main .u-main")[0]).removeClass("hide")):"2"===$(this).attr("data-nav")?($(".m-main").children().addClass("hide"),$($(".m-main .u-main")[1]).removeClass("hide")):"3"===$(this).attr("data-nav")&&($(".m-main").children().addClass("hide"),$($(".m-main .u-main")[2]).removeClass("hide"))})});